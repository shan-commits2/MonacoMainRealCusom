<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>shancommitsdieeeee</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      background: #1e1e1e;
      color: white;
      font-family: sans-serif;
    }
    .tabs {
      display: flex;
      padding: 5px;
      background: #2c2c2c;
      overflow-x: auto;
    }
    .tab {
      background: #3a3a3a;
      padding: 5px 10px;
      border-radius: 10px 10px 0 0;
      margin-right: 5px;
      cursor: pointer;
      display: flex;
      align-items: center;
      position: relative;
      transition: background 0.2s;
    }
    .tab.active {
      border-bottom: 2px solid white;
      background: #4a4a4a;
    }
    .tab img {
      width: 14px;
      height: 14px;
      margin-right: 5px;
    }
    .tab .close {
      display: none;
      margin-left: 8px;
      color: red;
      cursor: pointer;
    }
    .tab:hover .close {
      display: inline;
    }
    .tab-input {
      background: #1e1e1e;
      color: white;
      border: 1px solid #555;
      padding: 5px;
      width: 200px;
    }
    .editor-container {
      height: calc(100% - 40px);
    }
    .blurred {
      filter: blur(4px);
    }
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.5);
      z-index: 999;
    }
    .modal-content {
      background: #2c2c2c;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      z-index: 1000;
    }
    .modal input {
      margin-top: 10px;
      padding: 5px;
      background: #1e1e1e;
      color: white;
      border: 1px solid #555;
    }
    .modal button {
      margin-top: 10px;
      padding: 5px 10px;
      background: #444;
      color: white;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="tabs"></div>
  <div class="editor-container" id="editor"></div>

  <div class="modal" id="modal">
    <div class="modal-content">
      <h3 id="modalTitle">Create New Tab</h3>
      <input type="text" id="tabNameInput" placeholder="Tab name" />
      <br>
      <button id="modalButton">Create Tab</button>
    </div>
  </div>

  <script>
let tabs = JSON.parse(localStorage.getItem('tabs')) || { "Main Tab": "" };
let currentTab = "Main Tab";
const iconUrl = "https://raw.githubusercontent.com/shan-commits2/Alien-Ware/main/moonsec.png";

function saveTabs() { localStorage.setItem('tabs', JSON.stringify(tabs)); }

function openModal(action, tabName = '') {
  currentAction = action;
  targetTab = tabName;
  tabNameInput.value = tabName.slice(0, 15);

  modalTitle.textContent = action === 'create' ? 'Create New Tab' : 'Rename Your Tab';
  modalButton.textContent = action === 'create' ? 'Create Tab' : 'Rename Tab';

  modal.style.display = 'flex';
  editorContainer.classList.add('blurred');
  tabContainer.classList.add('blurred');
}

function closeModal() {
  modal.style.display = 'none';
  editorContainer.classList.remove('blurred');
  tabContainer.classList.remove('blurred');
}

modalButton.onclick = () => {
  const name = tabNameInput.value.trim().slice(0, 15);
  if (!name) return;
  if (currentAction === 'create') createTab(name);
  else renameTab(targetTab, name);
  closeModal();
};

function createTab(name) {
  if (Object.keys(tabs).length >= 9 || tabs[name]) return;

  tabs[name] = "";
  saveTabs();
  renderTabs();
  switchTab(name);
}

function renderTabs() {
  const tabContainer = document.querySelector('.tabs');
  tabContainer.innerHTML = '';

  Object.keys(tabs).forEach(name => {
    const tab = document.createElement('div');
    tab.className = 'tab' + (currentTab === name ? ' active' : '');
    tab.innerHTML = `<img src="${iconUrl}"><span>${name}</span>`;

    if (name !== "Main Tab") {
      const closeBtn = document.createElement('span');
      closeBtn.textContent = ' Ã—';
      closeBtn.className = 'close';
      closeBtn.onclick = (e) => { e.stopPropagation(); delete tabs[name]; saveTabs(); renderTabs(); };
      tab.appendChild(closeBtn);
    }

    tab.onclick = () => switchTab(name);
    tabContainer.appendChild(tab);
  });

  const plus = document.createElement('div');
  plus.className = 'tab';
  plus.textContent = '+';
  plus.onclick = () => openModal('create');
  tabContainer.appendChild(plus);
}

function switchTab(name) {
  currentTab = name;
  if (editor) {
    editor.setValue(tabs[name] || "");
  }
  saveTabs();
  renderTabs();
}

function updateCurrentTabText() {
  if (currentTab) {
    tabs[currentTab] = editor.getValue();
    saveTabs();
  }
}

window.setText = (tabName, text) => {
  if (tabs[tabName]) {
    tabs[tabName] = text;
    if (currentTab === tabName) editor.setValue(text);
    saveTabs();
  }
};

window.getText = (tabName) => tabs[tabName] || '';

require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs' }});
require(['vs/editor/editor.main'], function () {
  window.editor = monaco.editor.create(document.getElementById('editor'), {
    value: tabs[currentTab] || '',
    language: 'lua',
    theme: 'vs-dark',
    automaticLayout: true,
    fontSize: 14
  });

  editor.onDidChangeModelContent(updateCurrentTabText);

  renderTabs();
  switchTab(currentTab);
});

  </script>
</body>
</html>
